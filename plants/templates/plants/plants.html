{% extends "base.html" %}
{% load static %}

{% block css %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'plants/css/plants.css' %}">
{% endblock %}

{% block heading %}
<h1>Plants</h1>
{% endblock %}

{% block content %}
<div class="container d-flex flex-column flex-wrap flex-fill">
    <!-- Sort functionality -->
    <div class="row">
        <div class="col-12 d-flex justify-content-center">
            <select id="sort-selector" class="form-select my-3" aria-label="Sort By">
                <option value="default" {% if sort.key == None and sort.direction == None %}selected{% endif %}>
                    Sort By
                </option>
                <option value="name_asc" {% if sort.key == 'name' and sort.direction == 'asc' %}selected{% endif %}>
                    Name (A-Z)
                </option>
                <option value="name_desc" {% if sort.key == 'name' and sort.direction == 'desc' %}selected{% endif %}>
                    Name (Z-A)
                </option>
                <option value="price_asc" {% if sort.key == 'price' and sort.direction == 'asc' %}selected{% endif %}>
                    Price (Low to High)
                </option>
                <option value="price_desc" {% if sort.key == 'price' and sort.direction == 'desc' %}selected{% endif %}>
                    Price (High to Low)
                </option>
                <option value="category_asc" {% if sort.key == 'category' and sort.direction == 'asc' %}selected{% endif %}>
                    Category (A-Z)
                </option>
                <option value="category_desc" {% if sort.key == 'category' and sort.direction == 'desc' %}selected{% endif %}>
                    Category (Z-A)
                </option>
            </select>
        </div>
    </div>
    <div class="row">
        {% for plant in plants %}
        <div class="col-12 col-md-6 col-lg-4 col-xl-3">
            <div class="card">
                <a href="#">
                    <img src="{{ plant.image.url }}" class="card-img-top" alt="{{ plant.name }}">
                </a>
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{ plant.name }}</h5>
                    <p class="card-text"><em>{{ plant.botanical_name }}</em></p>
                    <p class="card-text">
                        <a class="text-muted text-decoration-none"
                            href="{% url 'plants' %}?category={{ plant.category.filter_name }}">
                            <i class="fas fa-seedling me-1"></i>{{ plant.category.name }}
                        </a>
                    </p>
                    {% if plant.discount_price %}
                    <p class="card-text ms-auto mt-auto"><del class="me-3">{{ plant.price }}
                            €</del>{{ plant.discount_price }} €</p>
                    {% else %}
                    <p class="card-text ms-auto mt-auto">{{ plant.price }} €</p>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block js %}
{{ block.super }}
<script src="{% static 'plants/js/plants.js' %}"></script>
{% endblock %}